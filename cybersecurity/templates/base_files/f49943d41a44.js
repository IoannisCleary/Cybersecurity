(function($){function Initialise($input,$button){var updateButtonState=function(){if($input.val()){$button.removeAttr('disabled');}else{$button.attr('disabled','disabled');}};$input.bind("input",updateButtonState);$input.bind("propertychange",updateButtonState);$button.attr('disabled','disabled');}
$.extend(true,window,{"Anywhere":{"TextInputHelper":{"Initialise":Initialise}}});})(jQuery);(function($){function ShowQuotaInformation(data){$('#id_disk_percent_full').text(data.percent);$('#id_disk_used').text(data.used);$('#id_disk_used').prop('title',data.used_bytes);$('#id_disk_quota').text(data.quota);$('#id_disk_quota').prop('title',data.quota_bytes);$('#id_quota_information').show();}
function GetQuotaInformation(url){$.get(url,ShowQuotaInformation);}
$.extend(true,window,{"Anywhere":{"Quota":{"GetQuotaInformation":GetQuotaInformation,"ShowQuotaInformation":ShowQuotaInformation}}});})(jQuery);(function($){function DeleteDirectory(url,directory_unique_name,force){function onAJAXSuccess(data){if(data.match(/failed to remove '.*': Directory not empty/)){$("#id_not_empty_dialog_"+directory_unique_name).dialog();}else if(data=="OK"){$('#id_row_'+directory_unique_name).addClass("pa_hidden");}else{$("#id_error_deleting_dialog_message_"+directory_unique_name).text(data);$("#id_error_deleting_dialog_"+directory_unique_name).dialog({width:600});}}
Anywhere.Utils.DoAjaxWithSpinnerAndErrorsAndButtonDisabling({url:url,data:{action:"delete_directory",force:force},error:"#id_error_message_"+directory_unique_name,buttonsToDisable:[],spinner:"#id_spinner_"+directory_unique_name,onSuccessFunction:onAJAXSuccess});}
function InitialiseDeleteDirectory(url,directory_unique_name){$("#id_delete_link_"+directory_unique_name).click(function(event){Anywhere.Files.DeleteDirectory(url,directory_unique_name,"false");event.preventDefault();});$("#id_ok_error_"+directory_unique_name).click(function(){$("#id_error_deleting_dialog_"+directory_unique_name).dialog("close");});$("#id_cancel_delete_"+directory_unique_name).click(function(){$("#id_not_empty_dialog_"+directory_unique_name).dialog("close");});$("#id_confirm_delete_"+directory_unique_name).click(function(){Anywhere.Files.DeleteDirectory(url,directory_unique_name,"true");$("#id_not_empty_dialog_"+directory_unique_name).dialog("close");});}
function DeleteFile(url,file_unique_name){function onAJAXSuccess(data){if(data=="OK"){$('#id_row_'+file_unique_name).addClass("pa_hidden");}}
Anywhere.Utils.DoAjaxWithSpinnerAndErrorsAndButtonDisabling({url:url,data:{action:"delete_file",},error:"#id_error_message_"+file_unique_name,buttonsToDisable:[],spinner:"#id_spinner_"+file_unique_name,onSuccessFunction:onAJAXSuccess});}
function InitialiseDeleteFile(url,file_unique_name){$("#id_delete_link_"+file_unique_name).click(function(event){event.preventDefault();$("#id_confirm_dialog_"+file_unique_name).dialog();});$("#id_cancel_delete_"+file_unique_name).click(function(){$("#id_confirm_dialog_"+file_unique_name).dialog("close");});$("#id_confirm_delete_"+file_unique_name).click(function(){Anywhere.Files.DeleteFile(url,file_unique_name);$("#id_confirm_dialog_"+file_unique_name).dialog("close");});}
function InitialiseUploadFile(){var _self=this;$('#id_upload_button').hide();$('#id_upload_filename').change(function(){$('#id_upload_button').show();});}
function ShowQuotaInformation(data){$('#id_disk_percent_full').text(data.percent);$('#id_disk_used').text(data.used);$('#id_disk_used').prop('title',data.used_bytes);$('#id_disk_quota').text(data.quota);$('#id_disk_quota').prop('title',data.quota_bytes);$('#id_quota_information').show();}
function GetQuotaInformation(url){$.get(url,ShowQuotaInformation);}
$.extend(true,window,{"Anywhere":{"Files":{"DeleteDirectory":DeleteDirectory,"InitialiseDeleteDirectory":InitialiseDeleteDirectory,"DeleteFile":DeleteFile,"InitialiseDeleteFile":InitialiseDeleteFile,"InitialiseUploadFile":InitialiseUploadFile,"GetQuotaInformation":GetQuotaInformation,"ShowQuotaInformation":ShowQuotaInformation}}});})(jQuery);$(function(){Anywhere.Files.InitialiseUploadFile();Anywhere.TextInputHelper.Initialise($('#id_new_file_name'),$('#id_new_file_button'));Anywhere.TextInputHelper.Initialise($('#id_new_directory_name'),$('#id_new_directory_button'));});